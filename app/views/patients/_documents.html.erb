<div class="patient-section">
  <div class="section-header">
    <h3><%= t('documents') %></h3>
  </div>

  <% if patient.documents.any? %>
    <ul class="documents-list">
      <% patient.documents.each do |document| %>
        <li>
          <div class="document-info">
            <strong><%= document.name %></strong>
            <% if document.file.attached? %>
              <%= link_to t('download'), rails_blob_path(document.file, disposition: "attachment"), class: "button small" %>
            <% end %>
          </div>
          <%= button_to t('delete'), patient_document_path(patient, document), method: :delete, class: "button small danger", form: { style: "display:inline-block;", data: { turbo_confirm: t('are_you_sure_document') } } %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p><%= t('no_documents') %></p>
  <% end %>

  <div class="add-form" style="margin-top: 2rem; border-top: 1px solid var(--border-color); padding-top: 2rem;">
    <h4><%= t('upload_document') %></h4>
    <%= form_with(model: [patient, Document.new], local: true) do |form| %>
      <div class="form-group">
        <%= form.label :name, t('document_name') %>
        <%= form.text_field :name, class: "form-control" %>
      </div>
      <div class="form-group">
        <%= form.label :file, t('file') %>
        <%= form.file_field :file, class: "form-control" %>
      </div>
      <%= form.submit t('upload'), class: "button small primary" %>
    <% end %>
  </div>
</div>
