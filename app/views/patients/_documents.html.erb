<div class="patient-section">
  <div class="section-header">
    <h3>Documents</h3>
  </div>

  <% if patient.documents.any? %>
    <ul class="documents-list">
      <% patient.documents.each do |document| %>
        <li>
          <div class="document-info">
            <strong><%= document.name %></strong>
            <% if document.file.attached? %>
              <%= link_to "Download", rails_blob_path(document.file, disposition: "attachment"), class: "button small" %>
            <% end %>
          </div>
          <%= button_to "Delete", patient_document_path(patient, document), method: :delete, class: "button small danger", form: { style: "display:inline-block;", data: { turbo_confirm: "Are you sure you want to delete this document?" } } %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No documents uploaded.</p>
  <% end %>

  <div class="add-form" style="margin-top: 2rem; border-top: 1px solid var(--border-color); padding-top: 2rem;">
    <h4>Upload Document</h4>
    <%= form_with(model: [patient, Document.new], local: true) do |form| %>
      <div class="form-group">
        <%= form.label :name, "Document Name" %>
        <%= form.text_field :name, class: "form-control" %>
      </div>
      <div class="form-group">
        <%= form.label :file %>
        <%= form.file_field :file, class: "form-control" %>
      </div>
      <%= form.submit "Upload", class: "button small primary" %>
    <% end %>
  </div>
</div>
