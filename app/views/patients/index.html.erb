<h1><%= t('patients') %></h1>

<div style="margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center;">
  <%= link_to "â† #{t('back_to_dashboard')}", root_path, class: "button secondary" %>
  <%= link_to t('new_patient'), new_patient_path, class: "button primary" %>
</div>

<div class="search-bar" style="margin-bottom: 2rem;">
  <%= form_with url: patients_path, method: :get, local: true, style: "display: flex; width: 100%; gap: 0.5rem;" do |form| %>
    <%= form.text_field :query, placeholder: t('search_patients'), value: params[:query], class: "search-input form-control" %>
    <%= form.submit t('search'), class: "button secondary" %>
  <% end %>
</div>

<div class="patients-table-container">
  <table>
    <thead>
      <tr>
        <th><%= link_to t('name'), patients_path(sort: "name", query: params[:query]) %></th>
        <th><%= t('identifier') %></th>
        <th><%= link_to t('registered'), patients_path(sort: "created_at", query: params[:query]) %></th>
        <th><%= t('actions') %></th>
      </tr>
    </thead>
    <tbody>
      <% @patients.each do |patient| %>
        <tr>
          <td><%= link_to patient.name, patient %></td>
          <td><%= patient.identifier %></td>
          <td><%= patient.created_at.strftime("%b %d, %Y") %></td>
          <td>
            <%= link_to t('view'), patient, class: "button small secondary" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
